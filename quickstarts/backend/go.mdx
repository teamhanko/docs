---
sidebarTitle: "Go"
title: Integrate Hanko with Go backend
---

## Get the Hanko API URL

Retrieve the API URL from the [Hanko console](https://cloud.hanko.io/).

<Note>
  If you are self-hosting Hanko you need to provide your own URL.
</Note>

## Hanko Authentication with JWT

When a user successfully logs in, Hanko issues a cookie containing a session token. This token can be utilized for request authentication in your backend implementation.

### Steps to Authenticate Requests


1. Retrieve the Session Token.

2. Verify the Session token using the Hanko [Validate](/api-reference/public/session-management/validate-a-session-1) API endpoint.

### Go-based Backend Example

Below is a sample middleware for a Go-based backend using the [Echo framework](https://echo.labstack.com/):

```go main.go
package main

import (
	"encoding/json"
	"io"
	"log"
	"net/http"
	"strings"

	"github.com/labstack/echo/v4"
	"github.com/labstack/echo/v4/middleware"
)

// Change to your Hanko API URL
var hanko_api_url = "YOUR_HANKO_API_URL"

// Change to the url of your frontend (origin)
var origins = []string{"http://localhost:5173"}
var port = "5001"

func main() {
	e := echo.New()

	//Cors middleware to allow requests from our frontend
	e.Use(middleware.CORSWithConfig(middleware.CORSConfig{
		AllowOrigins:     origins,
		AllowCredentials: true,
	}))

	//Validation page that has to go trough our session validation middleware
	e.GET("/validate", func(c echo.Context) error {
		return c.String(http.StatusOK, "Validation successful")
	}, SessionValidationMiddleware())

	e.Logger.Fatal(e.Start(":" + port))
}

// Middleware function to authenticate the hanko session
func SessionValidationMiddleware() echo.MiddlewareFunc {
	return func(next echo.HandlerFunc) echo.HandlerFunc {
		return func(c echo.Context) error {
			defer func() {
				if r := recover(); r != nil {
					log.Println("Recovered from panic:", r)
				}
			}()

			cookie, err := c.Cookie("hanko")
			if err != nil {
				return handleError(c, err, "Could not retrieve cookie")
			}

			payload := strings.NewReader(`{"session_token":"` + cookie.Value + `"}`)

            //Create a post request to the hanko sessions validate endpoint
			url := hanko_api_url + "/sessions/validate"
			req, err := http.NewRequest("POST", url, payload)
			if err != nil {
				return handleError(c, err, "Failed to create POST request")
			}

			req.Header.Add("Content-Type", "application/json")

			res, err := http.DefaultClient.Do(req)
			if err != nil {
				return handleError(c, err, "Failed to send request")
			}
			defer res.Body.Close()

			body, err := io.ReadAll(res.Body)
			if err != nil {
				return handleError(c, err, "Failed to read response body")
			}

			var jsonRes map[string]interface{}
			if err := json.Unmarshal(body, &jsonRes); err != nil {
				return handleError(c, err, "Failed to parse JSON response")
			}

			if isValid, ok := jsonRes["is_valid"].(bool); !ok || !isValid {
				return handleError(c, nil, `"is_valid" field missing or false`)
			}

			log.Println("Validation successful")
			return next(c)
		}
	}
}

func handleError(c echo.Context, err error, msg string) error {
	if err != nil {
		log.Println("ERROR:", msg, "-", err)
	} else {
		log.Println("ERROR:", msg)
	}
	return c.String(http.StatusUnauthorized, "Validation unsuccessful")
}
```

```bash run command
go run main.go
``` 

## Frontend request example
```tsx example.ts
fetch('http://localhost:5001/validate', {
    credentials: 'include', // This is required to include the cookie in the request
}).then((res) => {
    console.log(res.ok);
}).catch(() => {
    console.log(False);
});
```